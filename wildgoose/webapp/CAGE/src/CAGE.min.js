(function(l){function d(){try{var a=new XMLHttpRequest}catch(c){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(e){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(b){a=null}}}return a}function f(a,c,e){4==c.readyState&&200==c.status&&(a=c.responseText,"\n"===a.substring(a.length-1)&&(a=a.substring(0,a.length-1)),e(a))}var k=l.console,c=l.CAGE||{};c.ajax=c.ajax||{};c.ajax={GET:function(a){var c=a.url,e=a.callback;a=a.isAsync;void 0==a&&(a=!0);if(void 0!=c){var b=d();void 0==b?k.log("Unable to create request"):
(b.open("GET",c,a),void 0!==e&&b.addEventListener("readystatechange",function(a){f(a,b,e)},!1),b.send())}},POST:function(a){var c=a.url,e=a.callback,b=a.data;a=a.isAsync;void 0===a&&(a=!0);if(void 0!=c){var g=d();void 0===g?k.log("Unable to create request"):(g.open("POST",c,a),void 0!==e&&g.addEventListener("readystatechange",function(b){f(b,g,e)},!1),g.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),g.send(b))}},PUT:function(a){var c=a.url,e=a.callback,b=a.data;a=a.isAsync;void 0===
a&&(a=!0);if(void 0!==c){var g=d();void 0===g?k.log("Unable to create request"):(g.open("PUT",c,a),void 0!==e&&g.addEventListener("readystatechange",function(b){f(b,g,func)},!1),g.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),g.send(b))}},DELETE:function(a){var c=a.url,e=a.callback;a=a.isAsync;void 0===a&&(a=!0);if(void 0!==c){var b=d();void 0===b?k.log("Unable to create request"):(b.open("DELETE",c,a),void 0!==e&&b.addEventListener("readystatechange",function(a){f(a,b,e)},
!1),b.send())}}};"undefined"!==typeof module&&module.exports?module.exports=c:l.CAGE=c})(this);
(function(l){function d(b){this.type=b;this.eventHandlers=[]}function f(b){this.el=b.element;this.template=b.template;this.transitionEffect=b.transitionEffect?b.transitionEffect:"zoom";this.afteropen=new d("afteropen");this.afterclose=new d("afterclose");this.status={data:!1};this._init()}function k(b){this.el=b.element;this.template="!";this.transitionEffect=b.transitionEffect?b.transitionEffect:"zoom";this.templateUrl=b.templateUrl;this.templateLoader=b.templateLoader?b.templateLoader:function(b){return b};
this.afteropen=new d("afteropen");this.afterclose=new d("afterclose");this.status={data:!1};e.GET({url:this.templateUrl,callback:function(b){this.template=this.templateLoader(b);this._init()}.bind(this)})}var c=l.document,a=l.CAGE||{};a.ui=a.ui||{};a.ui.popup=a.ui.popup||{};var h=a.util.dom,e=a.ajax;d.prototype.add=function(b){this.eventHandlers.push(b)};d.prototype.remove=function(b){var a=this.eventHandlers,c;for(c in a)a[c]===b&&a.splice(c,1)};d.prototype.dispatch=function(){var b=this.eventHandlers,
a=void 0,c;for(c in b)a=arguments[c]?arguments[c]:void 0,b[c](a)};f.prototype._init=function(){function b(a){if("-webkit-transform"===a.propertyName&&!1===d.data){c.querySelector(".popup-wrap.popup-animation").removeEventListener("webkitTransitionEnd",b,!1);e.dispatch(c.querySelector(".popup-content"));d.data=!d.data;var g=c.querySelector(".popup-bg"),l=c.querySelector(".popup-wrap"),m=c.querySelector(".popup-container"),n=c.querySelector(".popup-content");c.addEventListener("keyup",function(b){27==
b.keyCode&&k()},!1);m.addEventListener("click",function(b){if(b.target===m||b.target===n)h.removeClass(g,"popup-ready"),h.removeClass(l,"popup-ready"),g.addEventListener("transitionend",function(b){if("opacity"===b.propertyName&&!0===d.data){f.dispatch(c.querySelector(".popup-content"));d.data=!d.data;b=c.querySelector(".popup-bg");var a=c.querySelector(".popup-wrap");b?c.body.removeChild(b):void 0;a?c.body.removeChild(a):void 0}}.bind(this),!1)},!1)}}var a=this.el,e=this.afteropen,f=this.afterclose,
d=this.status,k=this.close;a.addEventListener("click",function(e){e.preventDefault();e.stopPropagation();var d;e.toElement?d=e.toElement:e.originalTarget&&(d=e.originalTarget);d===a&&(this._counstructDOM(),c.querySelector(".popup-wrap.popup-animation").addEventListener("transitionend",b,!1))}.bind(this),!1)};f.prototype.open=function(){this.el.click()};f.prototype.close=function(){c.querySelector(".popup-container").click()};f.prototype._getTemplate=function(){return this.template};f.prototype._counstructDOM=
function(){var b=this.transitionEffect,a=c.createElement("div");h.addClass(a,"popup-bg");h.addClass(a,"popup-animation");var e=c.createElement("div");h.addClass(e,"popup-wrap");h.addClass(e,"popup-animation");var d=c.createElement("div");h.addClass(d,"popup-container");var f=c.createElement("div");h.addClass(f,"popup-content");f.innerHTML=this._getTemplate();d.appendChild(f);void 0!=b&&h.addClass(f,b+"-animation-dialog");e.appendChild(d);c.body.insertAdjacentHTML("afterbegin",e.outerHTML);c.body.insertAdjacentHTML("afterbegin",
a.outerHTML);(b=c.querySelector(".popup-wrap button[data-role\x3d'close']"))&&b.addEventListener("click",this.closePopup,!1);b=c.querySelector(".popup-wrap.popup-animation");a=c.querySelector(".popup-bg.popup-animation");b.offsetHeight;a.offsetHeight;a.style.transform="translateY(0px)";h.addClass(b,"popup-ready");h.addClass(a,"popup-ready")};k.prototype=f.prototype;a.ui.popup={popup:f,ajaxPopup:k};"undefined"!==typeof module&&module.exports?module.exports=a:l.CAGE=a})(this);
(function(l){var d=l.document,f=l.CAGE||{},k=!1;f.util=f.util||{};"classList"in d.createElement("a")&&(k=!0);var c=function(a,b){return RegExp("^.*"+b+".*$").test(a.className)?!0:!1},a=function(a,b){this.hasClass(a,b)||(a.className=""==a.className?b:a.className+(" "+b))},h={dom:{hasClass:function(){return k?function(a,b){return a.classList.contains(b)}:c}(),addClass:function(){return k?function(a,b){return a.classList.add(b)}:a}(),removeClass:function(){return k?function(a,b){return a.classList.remove(b)}:
a}()},string:{trim:function(){return"trim"in String.prototype?function(a){return String.prototype.trim.call(a)}:function(a){return this.ltrim(this.rtrim(a))}}(),rtrim:function(a){return"trimRight"in String.prototype?function(a){return String.prototype.trimRight.call(a)}:function(a){return a.replace(/\s*$/,"")}}(),ltrim:function(a){return"trimLeft"in String.prototype?function(a){return String.prototype.trimLeft.call(a)}:function(a){return a.replace(/^\s*/,"")}}()},template:{compiler:function(a,b){var c=
h.string.trim(b),d;for(d in a)if(0===a[d]||a[d])c=c.replace("\x3c%\x3d "+d+" %\x3e",a[d]);return c},getCompiler:function(){return this.compiler},get:function(a){var b=null;f.ajax.GET({url:a.url,isAsync:!1,callback:function(a){b=JSON.parse(a).data.template}});return b}}};f.util=h;"undefined"!==typeof module&&module.exports?module.exports=f:l.CAGE=f})(this);