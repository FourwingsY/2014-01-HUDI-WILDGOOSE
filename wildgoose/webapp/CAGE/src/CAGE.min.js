(function(k){var f=k.document,e=k.CAGE||{},d=!1;e.util=e.util||{};"classList"in f.createElement("a")&&(d=!0);var h=function(a,c){return RegExp("^.*"+c+".*$").test(a.className)?!0:!1},l=function(a,c){this.hasClass(a,c)||(a.className=""==a.className?c:a.className+(" "+c))},b={object:{extend:function(a,c){for(var b in c)a[b]=c[b];return a}},dom:{hasClass:function(){return d?function(a,c){return a.classList.contains(c)}:h}(),addClass:function(){return d?function(a,c){return a.classList.add(c)}:l}(),removeClass:function(){return d?
function(a,c){return a.classList.remove(c)}:l}()},string:{trim:function(){return"trim"in String.prototype?function(a){return String.prototype.trim.call(a)}:function(a){return this.ltrim(this.rtrim(a))}}(),rtrim:function(a){return"trimRight"in String.prototype?function(a){return String.prototype.trimRight.call(a)}:function(a){return a.replace(/\s*$/,"")}}(),ltrim:function(a){return"trimLeft"in String.prototype?function(a){return String.prototype.trimLeft.call(a)}:function(a){return a.replace(/^\s*/,
"")}}()},template:{compiler:function(a,c){var e=b.string.trim(c),d;for(d in a)if(0===a[d]||a[d])e=e.replace(RegExp("\x3c%\x3d "+d+" %\x3e","gm"),a[d]);return e},getCompiler:function(){return this.compiler},get:function(a){var c=null;e.ajax.GET({url:a.url,isAsync:!1,callback:function(a){c=JSON.parse(a).data.template}});return c}}};e.util=b;"undefined"!==typeof module&&module.exports?module.exports=e:k.CAGE=e})(this);
(function(k){function f(){try{var b=new XMLHttpRequest}catch(a){try{b=new ActiveXObject("Msxml2.XMLHTTP")}catch(c){try{b=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){b=null}}}return b}function e(b){return"\n"===b.substring(b.length-1)?b.substring(0,b.length-1):b}function d(b){var a=b.method,c=b.headers,d=b.url,k=b.callback,l=b.data,m=b.isAsync,n=b.success,p=b.failure,r=b.error;if(void 0!=d){void 0==m&&(m=!0);var g=f();if(void 0==g)h.log("Unable to create request");else{g.open(a,d,m);void 0!==k&&
g.addEventListener("readystatechange",function(a){4==g.readyState&&200==g.status&&(a=g.responseText,"\n"===a.substring(a.length-1)&&(a=a.substring(0,a.length-1)),k(a))},!1);void 0!==n&&g.addEventListener("load",function(a){a=a.target;if(200<=g.status&&300>g.status||304==g.status){e(g.responseText);var c=JSON.parse(g.responseText),b=c.status;200<=b&&300>b||304==b?n(c):(c=new CustomEvent("error",{detail:c}),a.dispatchEvent(c))}},!1);void 0!==p&&g.addEventListener("error",function(a){void 0!==a.detail?
p(a.detail):(e(g.responseText),a=JSON.parse(g.responseText),r(a))},!1);if(void 0!==c)for(var q in c)g.setRequestHeader(q,c[q]);g.send(l)}}}var h=k.console,l=k.CAGE||{};l.ajax=l.ajax||{};l.ajax={GET:function(b){b.method="GET";d(b)},POST:function(b){b.method="POST";b.headers={"Content-Type":"application/x-www-form-urlencoded"};d(b)},PUT:function(b){b.method="PUT";b.headers={"Content-Type":"application/x-www-form-urlencoded"};d(b)},DELETE:function(b){b.method="DELETE";d(b)}};"undefined"!==typeof module&&
module.exports?module.exports=l:k.CAGE=l})(this);
(function(k){function f(a){this.el=a.element;this.template=a.template;this.transitionEffect=a.transitionEffect?a.transitionEffect:"zoom";this.afteropen=new b("afteropen");this.afterclose=new b("afterclose");this.status={data:!1};this._init()}var e=k.document,d=k.CAGE||{};d.ui=d.ui||{};d.ui.popup=d.ui.popup||{};d.ui.popup.super_type=d.ui.popup.super_type||{};var h=d.util.dom,l=d.ajax,b=d.event.emitter;f.prototype._init=function(){this.el.addEventListener("click",this.openHandler.bind(this),!1)};f.prototype.openHandler=
function(a){"!"===this.template?l.GET({url:this.templateUrl,callback:function(c){this.template=this.templateLoader(c);a.preventDefault();a.stopPropagation();this._modularizeDOM()}.bind(this)}):this._modularizeDOM()};f.prototype._modularizeDOM=function(){this._counstructDOM();this._wrapAnimation()};f.prototype._wrapAnimation=function(){e.querySelector(".popup-wrap.popup-animation").addEventListener("transitionend",this.afteropenCallbackRef.bind(this),!1)};f.prototype.afteropenCallbackRef=function(a){"-webkit-transform"===
a.propertyName&&!1===this.status.data&&(e.querySelector(".popup-wrap.popup-animation").removeEventListener("webkitTransitionEnd",this.afteropenCallbackRef.bind(this),!1),this.afteropen.dispatch(e.querySelector(".popup-content")),this.status.data=!this.status.data,a=e.querySelector(".popup-container"),e.querySelector(".popup-content"),e.addEventListener("keyup",function(a){27==a.keyCode&&close()},!1),a.addEventListener("click",this._closeHandler.bind(this),!1))};f.prototype.open=function(){this.el.click()};
f.prototype.close=function(){e.querySelector(".popup-container").click()};f.prototype._closeHandler=function(a){var c={popupContainer:e.querySelector(".popup-container"),popupContent:e.querySelector(".popup-content"),popupBg:e.querySelector(".popup-bg"),popupWrap:e.querySelector(".popup-wrap")};a.target!==c.popupContainer&&a.target!==c.popupContent||this._closePopup(c)};f.prototype._closePopup=function(a){var c=a.popupBg,b=a.popupWrap;h.removeClass(c,"popup-ready");h.removeClass(b,"popup-ready");
c.addEventListener("transitionend",this._closePopupTransitionend.bind(this,event,a),!1)};f.prototype._closePopupTransitionend=function(a,c){var b=c.popupContent,d=c.popupBg,f=c.popupWrap;!0===this.status.data&&(this.afterclose.dispatch(b),this.status.data=!this.status.data,d?e.body.removeChild(d):void 0,f?e.body.removeChild(f):void 0)};f.prototype._getTemplate=function(){return this.template};f.prototype._counstructDOM=function(){var a=this.transitionEffect,c=e.createElement("div"),b=c.cloneNode(!1),
d=c.cloneNode(!1),f=c.cloneNode(!1),c=c.cloneNode(!1);h.addClass(b,"popup-bg");h.addClass(b,"popup-animation");h.addClass(d,"popup-wrap");h.addClass(d,"popup-animation");h.addClass(f,"popup-container");h.addClass(c,"popup-content");c.innerHTML=this._getTemplate();f.appendChild(c);void 0!=a&&h.addClass(c,a+"-animation-dialog");d.appendChild(f);e.body.insertAdjacentHTML("afterbegin",b.outerHTML+d.outerHTML);(a=e.querySelector(".popup-wrap button[data-role\x3d'close']"))&&a.addEventListener("click",
this.closePopup,!1);a=e.querySelector(".popup-wrap.popup-animation");b=e.querySelector(".popup-bg.popup-animation");a.offsetHeight;b.offsetHeight;b.style.transform="translateY(0px)";h.addClass(a,"popup-ready");h.addClass(b,"popup-ready")};d.ui.popup.super_type=f;"undefined"!==typeof module&&module.exports?module.exports=d:k.CAGE=d})(this);