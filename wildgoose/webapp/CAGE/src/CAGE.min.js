(function(f){var l=f.document,c=f.CAGE||{},g=!1;c.util=c.util||{};"classList"in l.createElement("a")&&(g=!0);var e=function(a,b){return RegExp("^.*"+b+".*$").test(a.className)?!0:!1},d=function(a,b){this.hasClass(a,b)||(a.className=""==a.className?b:a.className+(" "+b))},a={object:{extend:function(a,b){for(var k in b)a[k]=b[k];return a}},dom:{hasClass:function(){return g?function(a,b){return a.classList.contains(b)}:e}(),addClass:function(){return g?function(a,b){return a.classList.add(b)}:d}(),removeClass:function(){return g?
function(a,b){return a.classList.remove(b)}:d}()},string:{trim:function(){return"trim"in String.prototype?function(a){return String.prototype.trim.call(a)}:function(a){return this.ltrim(this.rtrim(a))}}(),rtrim:function(a){return"trimRight"in String.prototype?function(b){return String.prototype.trimRight.call(b)}:function(b){return b.replace(/\s*$/,"")}}(),ltrim:function(a){return"trimLeft"in String.prototype?function(b){return String.prototype.trimLeft.call(b)}:function(b){return b.replace(/^\s*/,
"")}}()},template:{compiler:function(c,b){var k=a.string.trim(b),m;for(m in c)if(0===c[m]||c[m])k=k.replace(RegExp("\x3c%\x3d "+m+" %\x3e","gm"),c[m]);return k},getCompiler:function(){return this.compiler},get:function(a){var b=null;c.ajax.GET({url:a.url,isAsync:!1,callback:function(a){b=JSON.parse(a).data.template}});return b}}};c.util=a;"undefined"!==typeof module&&module.exports?module.exports=c:f.CAGE=c})(this);
(function(f){function l(){try{var a=new XMLHttpRequest}catch(c){try{a=new ActiveXObject("Msxml2.XMLHTTP")}catch(b){try{a=new ActiveXObject("Microsoft.XMLHTTP")}catch(k){a=null}}}return a}function c(a){return"\n"===a.substring(a.length-1)?a.substring(0,a.length-1):a}function g(a){var d=a.method,b=a.headers,k=a.url,m=a.callback,g=a.data,f=a.isAsync,n=a.success,p=a.failure,s=a.error;if(void 0!=k){void 0==f&&(f=!0);var h=l();if(void 0==h)e.log("Unable to create request");else{h.open(d,k,f);void 0!==m&&
h.addEventListener("readystatechange",function(b){4==h.readyState&&200==h.status&&(b=h.responseText,"\n"===b.substring(b.length-1)&&(b=b.substring(0,b.length-1)),m(b))},!1);void 0!==n&&h.addEventListener("load",function(b){b=b.target;if(200<=h.status&&300>h.status||304==h.status){c(h.responseText);var a=JSON.parse(h.responseText),k=a.status;200<=k&&300>k||304==k?n(a):(a=new CustomEvent("error",{detail:a}),b.dispatchEvent(a))}},!1);void 0!==p&&h.addEventListener("error",function(b){void 0!==b.detail?
p(b.detail):(c(h.responseText),b=JSON.parse(h.responseText),s(b))},!1);if(void 0!==b)for(var q in b)h.setRequestHeader(q,b[q]);h.send(g)}}}var e=f.console,d=f.CAGE||{};d.ajax=d.ajax||{};d.ajax={GET:function(a){a.method="GET";g(a)},POST:function(a){a.method="POST";a.headers={"Content-Type":"application/x-www-form-urlencoded"};g(a)},PUT:function(a){a.method="PUT";a.headers={"Content-Type":"application/x-www-form-urlencoded"};g(a)},DELETE:function(a){a.method="DELETE";g(a)}};"undefined"!==typeof module&&
module.exports?module.exports=d:f.CAGE=d})(this);
(function(f){function l(b){this.type=b;this.eventHandlers=[]}function c(b){this.el=b.element;this.template=b.template;this.transitionEffect=b.transitionEffect?b.transitionEffect:"zoom";this.afteropen=new l("afteropen");this.afterclose=new l("afterclose");this.status={data:!1};this._init()}function g(b){this.el=b.element;this.template="!";this.transitionEffect=b.transitionEffect?b.transitionEffect:"zoom";this.templateUrl=b.templateUrl;this.templateLoader=b.templateLoader?b.templateLoader:function(b){return b};
this.afteropen=new l("afteropen");this.afterclose=new l("afterclose");this.status={data:!1};this._init()}var e=f.document,d=f.CAGE||{};d.ui=d.ui||{};d.ui.popup=d.ui.popup||{};var a=d.util.dom,r=d.ajax;l.prototype.add=function(b){this.eventHandlers.push(b)};l.prototype.remove=function(b){var a=this.eventHandlers,c;for(c in a)a[c]===b&&a.splice(c,1)};l.prototype.dispatch=function(){var b=this.eventHandlers,a=void 0,c;for(c in b)a=arguments[c]?arguments[c]:void 0,b[c](a)};c.prototype._init=function(){this.el.addEventListener("click",
this.openHandler.bind(this),!1)};c.prototype.openHandler=function(b){"!"===this.template?r.GET({url:this.templateUrl,callback:function(a){this.template=this.templateLoader(a);b.preventDefault();b.stopPropagation();this._modularizeDOM()}.bind(this)}):this._modularizeDOM()};c.prototype._modularizeDOM=function(){this._counstructDOM();this._wrapAnimation()};c.prototype._wrapAnimation=function(){e.querySelector(".popup-wrap.popup-animation").addEventListener("transitionend",this.afteropenCallbackRef.bind(this),
!1)};c.prototype.afteropenCallbackRef=function(b){"-webkit-transform"===b.propertyName&&!1===this.status.data&&(e.querySelector(".popup-wrap.popup-animation").removeEventListener("webkitTransitionEnd",this.afteropenCallbackRef.bind(this),!1),this.afteropen.dispatch(e.querySelector(".popup-content")),this.status.data=!this.status.data,b=e.querySelector(".popup-container"),e.querySelector(".popup-content"),e.addEventListener("keyup",function(b){27==b.keyCode&&close()},!1),b.addEventListener("click",
this._closeHandler.bind(this),!1))};c.prototype.open=function(){this.el.click()};c.prototype.close=function(){e.querySelector(".popup-container").click()};c.prototype._closeHandler=function(b){var a={popupContainer:e.querySelector(".popup-container"),popupContent:e.querySelector(".popup-content"),popupBg:e.querySelector(".popup-bg"),popupWrap:e.querySelector(".popup-wrap")};b.target!==a.popupContainer&&b.target!==a.popupContent||this._closePopup(a)};c.prototype._closePopup=function(b){var c=b.popupBg,
e=b.popupWrap;a.removeClass(c,"popup-ready");a.removeClass(e,"popup-ready");c.addEventListener("transitionend",this._closePopupTransitionend.bind(this,event,b),!1)};c.prototype._closePopupTransitionend=function(b,a){var c=a.popupContent,d=a.popupBg,f=a.popupWrap;!0===this.status.data&&(this.afterclose.dispatch(c),this.status.data=!this.status.data,d?e.body.removeChild(d):void 0,f?e.body.removeChild(f):void 0)};c.prototype._getTemplate=function(){return this.template};c.prototype._counstructDOM=function(){var b=
this.transitionEffect,c=e.createElement("div"),d=c.cloneNode(!1),f=c.cloneNode(!1),g=c.cloneNode(!1),c=c.cloneNode(!1);a.addClass(d,"popup-bg");a.addClass(d,"popup-animation");a.addClass(f,"popup-wrap");a.addClass(f,"popup-animation");a.addClass(g,"popup-container");a.addClass(c,"popup-content");c.innerHTML=this._getTemplate();g.appendChild(c);void 0!=b&&a.addClass(c,b+"-animation-dialog");f.appendChild(g);e.body.insertAdjacentHTML("afterbegin",d.outerHTML+f.outerHTML);(b=e.querySelector(".popup-wrap button[data-role\x3d'close']"))&&
b.addEventListener("click",this.closePopup,!1);b=e.querySelector(".popup-wrap.popup-animation");d=e.querySelector(".popup-bg.popup-animation");b.offsetHeight;d.offsetHeight;d.style.transform="translateY(0px)";a.addClass(b,"popup-ready");a.addClass(d,"popup-ready")};g.prototype=c.prototype;d.ui.popup={popup:c,ajaxPopup:g};"undefined"!==typeof module&&module.exports?module.exports=d:f.CAGE=d})(this);