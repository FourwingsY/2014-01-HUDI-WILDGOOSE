(function(){var c=window.document,e=window.WILDGOOSE||{};e.user=e.user||{};var d=CAGE.ajax;e.user={randNum:null,userId:void 0,mobileStatus:void 0,getId:function(){if(void 0!==this.userId)return this.userId;var a=c.getElementById("userId");null!==a&&(this.userId=a.innerText);return this.userId},isLogined:function(){return""==this.getId()?!1:!0},getRandomNumber:function(){if(null!==this.randNum)return this.randNum;d.GET({isAsync:!1,url:"/api/v1/session/rand",success:function(a){this.randNum=a.data.rand}.bind(this)});
return this.randNum},isMobile:function(){if(void 0!==this.mobileStatus)return this.mobileStatus;var a=navigator.userAgent||navigator.vendor||window.opera;if(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,
4)))this.mobileStatus=!0;return this.mobileStatus}};"undefined"!==typeof module&&module.exports?module.exports=e:window.WILDGOOSE=e})();
(function(c){function e(a){null!==a&&[].forEach.call(a.children,function(a){a.draggable="true";a.addEventListener("dragstart",function(a){var g=a.target;g.classList.add(b.movedClassName);a.dataTransfer.effectAllowed="move";g.tagName==b.tagName&&(b.sourceEle=g)},!1);a.addEventListener("dragover",function(a){a.preventDefault&&a.preventDefault();a.dataTransfer.dropEffect="move"},!1);a.addEventListener("drop",function(a){var g=a.target;for(a.stopPropagation&&a.stopPropagation();;){if(g.tagName==b.tagName){b.destEle=
g;break}g=g.parentNode}},!1);a.addEventListener("dragend",function(a){a.preventDefault();a=a.target;-1!=a.className.indexOf(b.movedClassName)&&a.classList.remove(b.movedClassName);null!=b.destEle&&null!=b.sourceEle&&b.destEle.insertAdjacentElement("afterend",b.sourceEle);a="";for(var g=b.target.children,n=0;n<g.length-1;n++)a=a+g[n].firstElementChild.getAttribute("data-reporter_id")+" ";localStorage.setItem(h.getId(),a)},!1)})}var d=c.document,a=c.WILDGOOSE||{};a.drag=a.drag||{};var h=a.user,b={sourceEle:null,
destEle:null};a.drag={exe:function(a){b.target=a.body;b.tagName=a.tagName;b.movedClassName=a.movedClassName;e(a.body);a=d.querySelector(".dashboard-left ul");if(null!==a){var f=a.children;if(void 0!=localStorage.getItem(h.getId())){var k=localStorage.getItem(h.getId()).split(" ");k.pop();for(var g=0;g<k.length;g++)for(var n=0;n<f.length-1;n++)null!=f[n].firstElementChild&&f[n].firstElementChild.getAttribute("data-reporter_id")==k[g]&&a.appendChild(f[n]);f=d.querySelector(".card-last");a.appendChild(f)}}}};
"undefined"!==typeof module&&module.exports?module.exports=a:c.WILDGOOSE=a})(this);
(function(){function c(a){null==a?d.error("No element found"):(this.star=a,this.reporterId=this.getReporterId(),this.show(),this.attatchEvent())}var e=window.document,d=window.console,a=window.WILDGOOSE||{};a.ui=a.ui||{};a.favorite=a.favorite||{};var h=CAGE.ajax,b=CAGE.util.dom,l=a.user;c.prototype={constructor:c,show:function(){b.removeClass(this.star,"invisible")},getReporterId:function(){return parseInt(this.star.parentElement.parentElement.dataset.reporter_id)},toggleStar:function(a){var g=this.star;
!0==a?(b.addClass(g,"on"),b.removeClass(g,"off")):!1==a&&(b.removeClass(g,"on"),b.addClass(g,"off"))},clickStar:function(a){a=a.target;var g="/api/v1/users/"+f.userId+"/favorites/?reporter_id\x3d"+a.parentElement.parentElement.parentElement.firstElementChild.dataset.reporter_id;b.hasClass(a,"on")?h.DELETE({url:g,success:function(a){this.toggleStar(!1)}.bind(this),failure:function(a){d.log("Failure!")},error:function(a){d.log("Error!")}}):h.POST({url:g,success:function(a){this.toggleStar(!0)}.bind(this),
failure:function(a){d.log("Failure!")},error:function(a){d.log("Error!")}})},attatchEvent:function(){this.star.addEventListener("click",this.clickStar.bind(this),!1);this.star.addEventListener("click",function(a){b.addClass(a.target,"pumping");setTimeout(function(){b.removeClass(a.target,"pumping")},300)},!1)},updateStar:function(){"/api/v1/users/:userId/favorites/:reporterId".replace(":userId",this.userId);"/api/v1/users/:userId/favorites/:reporterId".replace(":reporterId",this.reporterId);h.GET({url:"/api/v1/users/:userId/favorites/:reporterId",
callback:function(a){!0==JSON.parse(a).data.bool&&this.toggleStar()}.bind(this)})}};var f={starList:[],userFavorites:[],init:function(){var a=l.getId();if(""==a||void 0==a)d.error("Not logined");else{this.userId=a;for(var a=e.querySelectorAll(".star"),b=0;b<a.length;b++){var n=new c(a[b]);this.starList.push(n)}this.getStarListFromServer()}},addCards:function(a){var b=l.getId();""!=b&&void 0!=b&&(a=a.querySelectorAll(".star"),Array.prototype.forEach.call(a,function(a){a=new c(a);0<=this.userFavorites.indexOf(a.reporterId)&&
a.toggleStar(!0)}.bind(this)))},updateStars:function(a){for(var b=0;b<a.length;b++){var n=a[b];0<=this.userFavorites.indexOf(n.reporterId)&&n.toggleStar(!0)}},getStarListFromServer:function(){var a;a="/api/v1/users/:userId/favorites/".replace(":userId",this.userId);h.GET({url:a,callback:function(a){a=JSON.parse(a).data.reporterCards;for(var b=0;b<a.length;b++)f.userFavorites.push(a[b].id);this.updateStars(this.starList)}.bind(this)})}};a.ui.favorite=f;"undefined"!==typeof module&&module.exports?module.exports=
a:window.WILDGOOSE=a})();
(function(){function c(a){null==a?d.error("No element found"):(this.star=a,this.reporterId=this.getReporterId(),this.show(),this.attatchEvent())}var e=window.document,d=window.console,a=window.WILDGOOSE||{};a.ui=a.ui||{};a.ui.favorite=a.ui.favorite||{};a.ui.favorite.me=a.ui.favorite.me||{};var h=CAGE.ajax,b=CAGE.util.dom,l=a.user;c.prototype={constructor:c,show:function(){b.removeClass(this.star,"invisible")},getReporterId:function(){return parseInt(this.star.parentElement.parentElement.dataset.reporter_id)},toggleStar:function(a){var g=
this.star,f=g.parentElement.parentElement.parentElement,c=e.querySelector(".dashboard-left"),h=e.querySelector(".dashboard-right");if(!0==a){if(b.addClass(g,"on"),b.removeClass(g,"off"),b.removeClass(f,"blur"),b.isDescendant(h,f)){d.log("right to left");a=e.querySelector(".container").getBoundingClientRect();g=f.getBoundingClientRect();f.style.position="absolute";f.style.width=g.width+"px";f.style.height=g.height+"px";f.style.top=g.top-a.top+"px";f.style.left=g.left-a.left+"px";f.style.zIndex=1;var l=
e.querySelector(".card-last"),g=l.getBoundingClientRect();f.style.top=g.top-a.top-10+"px";f.style.left=g.left-a.left+"px";setTimeout(function(){e.querySelector(".dashboard-left \x3e ul").insertBefore(f.parentNode.removeChild(f),l);f.style.position="";f.style.width="";f.style.height="";f.style.top="";f.style.left="";f.style.zIndex=""},500)}}else!1==a&&(b.removeClass(g,"on"),b.addClass(g,"off"),b.isDescendant(c,f)&&b.addClass(f,"blur"))},clickStar:function(a){a=a.target;var g="/api/v1/users/"+f.userId+
"/favorites/?reporter_id\x3d"+a.parentElement.parentElement.parentElement.firstElementChild.dataset.reporter_id;b.hasClass(a,"on")?h.DELETE({url:g,success:function(a){this.toggleStar(!1)}.bind(this),failure:function(a){d.log("Failure!")},error:function(a){d.log("Error!")}}):h.POST({url:g,success:function(a){this.toggleStar(!0)}.bind(this),failure:function(a){d.log("Failure!")},error:function(a){d.log("Error!")}})},attatchEvent:function(){this.star.addEventListener("click",this.clickStar.bind(this),
!1);this.star.addEventListener("click",function(a){b.addClass(a.target,"pumping");setTimeout(function(){b.removeClass(a.target,"pumping")},300)},!1)},updateStar:function(){"/api/v1/users/:userId/favorites/:reporterId".replace(":userId",this.userId);"/api/v1/users/:userId/favorites/:reporterId".replace(":reporterId",this.reporterId);h.GET({url:"/api/v1/users/:userId/favorites/:reporterId",callback:function(a){!0==JSON.parse(a).data.bool&&this.toggleStar()}.bind(this)})}};var f={starList:[],userFavorites:[],
init:function(){var a=l.getId();if(""==a||void 0==a)d.error("Not logined");else{this.userId=a;for(var a=e.querySelectorAll(".star"),b=0;b<a.length;b++){var f=new c(a[b]);this.starList.push(f)}this.getStarListFromServer()}},addCards:function(a){var b=l.getId();""!=b&&void 0!=b&&(a=a.querySelectorAll(".star"),Array.prototype.forEach.call(a,function(a){a=new c(a);0<=this.userFavorites.indexOf(a.reporterId)&&a.toggleStar(!0)}.bind(this)))},updateStars:function(a){for(var b=0;b<a.length;b++){var f=a[b];
0<=this.userFavorites.indexOf(f.reporterId)&&f.toggleStar(!0)}},getStarListFromServer:function(){var a;a="/api/v1/users/:userId/favorites/".replace(":userId",this.userId);h.GET({url:a,callback:function(a){a=JSON.parse(a).data.reporterCards;for(var b=0;b<a.length;b++)f.userFavorites.push(a[b].id);this.updateStars(this.starList)}.bind(this)})}};a.ui.favorite.me=f;"undefined"!==typeof module&&module.exports?module.exports=a:window.WILDGOOSE=a})();
(function(){var c=window.console,e=window.WILDGOOSE||{};e.ui=e.ui||{};e.ui.graph=e.ui.graph||{};var d=CAGE.ajax;e.ui.graph={brokenLine:function(a){var e=JSON.parse(a).data.numberOfArticles;a=d3.select("#brokenline-graph \x3e .graph").append("svg").style("width","100%").style("height",300).attr("id","brokenLineGraph").attr("viewBox","0 0 520 360");a.append("rect").attr("width","100%").attr("height","100%").attr("fill","#26A88E");a.selectAll("text").data([{y_pos:285,num:"0"},{y_pos:235,num:"1"},{y_pos:185,
num:"2"},{y_pos:135,num:"3"},{y_pos:85,num:"4"}]).enter().append("text").attr("x",7).attr("font-size","18").attr("fill","white").attr("y",function(a){return a.y_pos}).text(function(a){return a.num});guidanceLinePosition=["M 45 85 H520","M 45 135 H520","M 45 185 H520","M 45 235 H520","M 45 285 H520"];a.selectAll("path").data(guidanceLinePosition).enter().append("path").attr("d",function(a){return a}).attr("stroke","#7D7D7D").attr("stroke-width",1).style("stroke-dasharray","5,8").attr("stroke-opacity",
0.6).attr("fill","none");matching=[{0:285,1:235,2:185,3:135,4:85}];graphPositionX=[50,120,190,260,330,400,470];var b=[],d=new Date;d.setDate(d.getDate()-7);for(var f=0;7>f;f++){d.setDate(d.getDate()+1);var k=d.getMonth()+1;10>k&&(k="0"+k);var g=d.getDate();10>g&&(g="0"+g);b.push(k+"/"+g)}d=function(a){for(var b=0;b<e.length;b++){var f=e[b];if(f.date==a)return f.count}return 0};d=[{x:graphPositionX[0],y:matching[0][d(b[0])]},{x:graphPositionX[1],y:matching[0][d(b[1])]},{x:graphPositionX[2],y:matching[0][d(b[2])]},
{x:graphPositionX[3],y:matching[0][d(b[3])]},{x:graphPositionX[4],y:matching[0][d(b[4])]},{x:graphPositionX[5],y:matching[0][d(b[5])]},{x:graphPositionX[6],y:matching[0][d(b[6])]}];c.log(d);k=d3.svg.line().x(function(a){return a.x}).y(function(a){return a.y}).interpolate("linear");a.append("path").attr("stroke","white").attr("stroke-width",2).attr("fill","none").attr("stroke-linecap","round").attr("d",k(d));a.append("text").attr("x",370).attr("y",40).attr("font-size","20").attr("fill","white").text("기사송고추이");
for(f in b)b[f]=b[f].replace("-","/");for(labelIndex=0;labelIndex<b.length;labelIndex++)a.append("text").attr("font-size","18").attr("fill","white").attr("y",315).attr("x",20+70*labelIndex).text(b[labelIndex])},radar:function(a){function d(a,b){var f=a.x*Math.cos(b)-a.y*Math.sin(b),k=a.x*Math.sin(b)+a.y*Math.cos(b);return{x:f,y:k}}var b={"통솔":10*Math.random(),"매력":10*Math.random(),"지력":10*Math.random(),"정치":10*Math.random(),"무력":10*Math.random()};a={"container-width":400,"container-height":400,"circle-scale":0.75,
color:"red"};var c=d3.select("#radar-graph \x3e .graph").append("svg").style("width","100%").style("height","300px").attr("id","radarGraph").attr("viewBox","0 0 400 400");c.append("rect").attr("width","100%").attr("height","100%").attr("fill","#FFF");for(var f=a["container-width"]/2*a["circle-scale"],k=0;10>k;k++)c.append("ellipse").attr("cx",a["container-width"]/2).attr("cy",a["container-height"]/2).attr("rx",f*(1-0.1*k)).attr("ry",f*(1-0.1*k)).attr("stroke","#AAA").attr("stroke-width",0.5).attr("fill",
"white").attr("fill-opacity",0);var g=Object.keys(b).length,k=0,e=[],p;for(p in b){var m={x:0,y:-1*b[p]/10*f},m=d(m,2*Math.PI/g*k);m.x+=a["container-width"]/2;m.y+=a["container-height"]/2;e.push(m);k++}e.push(e[0]);p=d3.svg.line().x(function(a){return a.x}).y(function(a){return a.y}).interpolate("linear");for(var q=[],k=0;k<g;k++){var m={x:0,y:-1*f},m=d(m,2*Math.PI/g*k),r={x:0,y:-1*(f+25)},r=d(r,2*Math.PI/g*k);m.x+=a["container-width"]/2;m.y+=a["container-height"]/2;m.title=Object.keys(b)[k];m.value=
b[m.title];m.x_t=r.x+a["container-width"]/2;m.y_t=r.y+a["container-height"]/2;q.push(m)}for(b=0;b<q.length;b++)c.append("path").attr("d",p([q[b],{x:a["container-width"]/2,y:a["container-width"]/2}])).attr("stroke","#AAA").attr("stroke-width",0.5).attr("fill","yellow").attr("fill-opacity",0.6);c.append("path").attr("d",p(e)).attr("stroke","#222").attr("stroke-width",0.5).attr("stroke-opacity",0.1).attr("fill",a.color).attr("fill-opacity",0.4);c.selectAll("text").data(q).enter().append("text").attr("x",
function(a){return a.x_t-16}).attr("y",function(a){return"통솔"===a.title?a.y_t+1:a.y_t-4}).text(function(a){return a.title}).attr("font-family","sans-serif").attr("font-size","18px").attr("fill","#AAA").append("svg:tspan").attr("x",function(a){return a.x_t-16}).attr("dy",20).attr("font-size","23px").attr("fill","#444").text(function(a){return parseInt(10*a.value)/10})},donut:function(a){c.log(a);var d=JSON.parse(a).data.numberOfArticles;c.log(d);var b=d3.scale.category20c();a=d3.select("#donut-graph \x3e .graph").append("svg").data([d]).attr("viewBox",
"0 0 300 300").attr("style","width: 100%; height: 300px;").append("svg:g").attr("transform","translate(150,150)");var e=d3.svg.arc().outerRadius(120),f=d3.layout.pie().value(function(a){return a.value});a=a.selectAll("g.slice").data(f).enter().append("svg:g").attr("class","slice");a.append("svg:path").attr("fill",function(a,f){return b(f)}).attr("d",e);a.append("svg:text").attr("transform",function(a){a.innerRadius=0;a.outerRadius=100;return"translate("+e.centroid(a)+")"}).attr("text-anchor","middle").text(function(a,
b){return d[b].label}).attr("font-family","sans-serif").attr("font-size","18px").attr("fill","#FFF")},init:function(){var a=window.location.pathname.split("/")[2],c={donut:{url:"/api/v1/reporters/:reporterId/statistics?data\x3dnumber_of_articles\x26by\x3dsection",callback:this.donut},brokenLine:{url:"/api/v1/reporters/:reporterId/statistics?data\x3dnumber_of_articles\x26by\x3dday",callback:this.brokenLine},radar:{url:"/api/v1/reporters/:reporterId/statistics?data\x3dstat_points",callback:this.radar}},
b;for(b in c){var e=c[b],f=e.url.replace(":reporterId",a);d.GET({url:f,callback:e.callback.bind(this)})}}}})();
(function(){var c=window.WILDGOOSE||{};c.ui=c.ui||{};c.ui.startme=c.ui.startme||{};var e=CAGE.util.dom,d=c.user;c.ui.startme={init:function(a){this.startBtn=a.button;this.starEls=a.target;this.targetArr=[];this.startBtn.addEventListener("click",this.start,!1);null!==this.startBtn&&null!==this.starEls&&Array.prototype.forEach.call(this.starEls,function(a){a.addEventListener("click",this.check.bind(this),!1)}.bind(this))},check:function(a){e.removeClass(this.startBtn,"disable")},start:function(a){location.href=
"/me/"+d.getId()}};"undefined"!==typeof module&&module.exports?module.exports=c:window.WILDGOOSE=c})();
(function(c){function e(a,b){this.rule=b;this.myLogics={};this.mySequence={};this.UI.form=a;this.defineLogics()}var d=c.document,a=c.WILDGOOSE||{};a.validator=a.validator||{};var h=CAGE.util.object.extend,b=CAGE.util.dom,l=CAGE.ajax;e.prototype={constructor:"Validator",defineLogics:function(){for(var a in this.rule){var b=this.rule[a].type;this.myLogics[a]=h({},this.normLogics[b]);this.defineSequence(a,b,this.rule[a].extend);this.defineFunction(a,this.rule[a].extend);"confirm"==b&&(this.myLogics[a].target=
this.rule[a].target)}},defineSequence:function(a,b,d){this.mySequence[a]=[].concat(this.normSequence[b]);if(void 0!==d)for(b=Object.keys(d),d=0;d<b.length;++d){var c=b[d];-1==this.mySequence[a].indexOf(c)&&this.mySequence[a].push(c)}},defineFunction:function(a,b){for(var d in this.mySequence[a]){var c=this.mySequence[a][d];void 0!==b&&b.hasOwnProperty(c)?this.myLogics[a][c]=b[c]:void 0!==this.myLogics[a][c]&&null===this.myLogics[a][c][0]&&(this.myLogics[a][c][0]=this.normFunction[c])}},check:function(a){for(var b=
a.name,d=this.myLogics[b],b=this.mySequence[b],c=!0,e=0;e<b.length;++e){var h=b[e],l=d[h][1];if(!this._isValid(d[h][0],a)){c=!1;break}}this.UI.update(c,a,l);return c},_isValid:function(a,d){var c=d.name,e=d.value;if(a instanceof RegExp)return a.test(e);if(a instanceof Function){var h=!1;a.call(this.myLogics[c],d,function(a,c){c&&b.removeClass(d,"isProgressing");h=a});return h}return!1},normFunction:{usable:function(a,b){l.GET({isAsync:!1,url:"/api/v1/accounts?email\x3d"+a.value,success:function(a){b(!0,
!0)},failure:function(a){b(!1,!0)}})},equal:function(a,b){var c=d.querySelector("."+a.form.className+" input[name\x3d"+this.target+"]");b(a.value==c.value)}},normSequence:{email:["required","format","usable"],password:["required","letter","size","ampleNumber","ampleLetter"],confirm:["required","equal"]},normLogics:{email:{required:[/.+/,"email을 입력해주세요"],format:[/^[\w\.-_\+]+@[\w-]+(\.\w{2,4})+$/,"email형식을 지켜주세요"],usable:[null,"이미 등록된 email입니다"]},password:{required:[/.+/,"비밀번호를 입력해주세요"],letter:[/[a-zA-Z0-9\`\~\!\@\#\$\%\^\&|*\(\)\-\_\=\=\+\\\|\,\.\<\>\/\?\[\]\{\}\;\:\'\"]/,
"숫자, 영문자 대소문자, 특수문자만 사용해주세요"],size:[/^.{8,15}$/,"8~15자 사이로 입력해주세요"],ampleNumber:[/(.*\d{1}.*){4,}/,"숫자는 4자리 이상 포함되어야 합니다"],ampleLetter:[/(.*\D{1}.*){4,}/,"문자는 4자리 이상 포함되어야 합니다"]},confirm:{required:[/.+/,"다시 입력해주세요"],equal:[null,"다시 확인해주세요"]}},UI:{update:function(a,b,d){a?(this._unwarn(b),this._validStyle(b)):(this._warn(b,d),this._invalidStyle(b))},_validStyle:function(a){a=a.parentNode.parentNode.parentNode;b.removeClass(a,"is-invalid");b.addClass(a,"is-valid")},_invalidStyle:function(a){a=a.parentNode.parentNode.parentNode;
b.removeClass(a,"is-valid");b.addClass(a,"is-invalid")},_warn:function(a,b){this.form.querySelector(".msg-"+a.name).innerText=b},_unwarn:function(a){this.form.querySelector(".msg-"+a.name).innerText=""}}};a.validator=e;"undefined"!==typeof module&&module.exports?module.exports=a:c.WILDGOOSE=a})(this);
(function(c){function e(a){this.selectedEl={};this.validator=this.url=this.form=this.names=this.rule=this.method=this.randNum=this.submitEl=null;this.cache={keyEvtHandler:this._keyEvtHandler.bind(this)};this._account(a)}var d=c.document,a=c.console,h=c.WILDGOOSE||{};h.account=h.account||{};h.account.super_type=h.account.super_type||{};var b=CAGE.util.dom,l=CAGE.ajax,f=h.validator;e.prototype={constructor:"Account",_account:function(a){void 0!==a&&(this.method=a.method,this.rule=a.rule,this.form=d.querySelector(a.form),
this.url=a.url,this.randNum=a.randNum,void 0!==this.rule&&(this.names=Object.keys(this.rule),this._extract(),this.validator=new f(this.form,this.rule),this._addKeyEvent(),this._init()))},_getPayload:function(){return null},stop:function(){this._removeKeyEvent()},exec:function(d,c){if(void 0!==this.rule&&b.hasClass(this.submitEl,"disable"))a.log("누르지마 바보야");else l[this.method]({url:this.url,success:function(){d();a.log("Success!")},failure:function(){void 0!==c&&c();a.log("FAIL!")},data:this._getPayload()})},
_init:function(){for(var a in this.selectedEl){var b=this.selectedEl[a];""!=b.value&&this._validateField(b,!1)}},_extract:function(){for(var a=this.form.length-1;0<=a;--a){var b=this.form[a];"submit"==b.name?this.submitEl=b:void 0!==this.names&&-1!=this.names.indexOf(b.name)&&(this.selectedEl[b.name]=b)}},_addKeyEvent:function(){for(var a in this.selectedEl)this.selectedEl[a].addEventListener("keyup",this.cache.keyEvtHandler,!1)},_removeKeyEvent:function(){for(var a in this.selectedEl)this.selectedEl[a].removeEventListener("keyup",
this.cache.keyEvtHandler,!1)},_keyEvtHandler:function(a){var b=13==a.keyCode?!0:!1;this._validateField(a.target,b);b&&(a=new CustomEvent("click",{detail:{enter:b}}),this.submitEl.dispatchEvent(a))},_validateField:function(a,b){this.validator.check(a);this._updateUI(this._ckeckSubmitStatus(b))},_ckeckSubmitStatus:function(a){a=!0;for(var d in this.selectedEl){var c=this.selectedEl[d].parentNode.parentNode.parentNode;if(!b.hasClass(c,"is-valid")||b.hasClass(c,"is-invalid")){a=!1;break}}return a},_updateUI:function(a){a?
(b.removeClass(this.submitEl,"disable"),b.addClass(this.submitEl,"enable")):(b.removeClass(this.submitEl,"enable"),b.addClass(this.submitEl,"disable"))}};h.account.super_type=e;"undefined"!==typeof module&&module.exports?module.exports=h:c.WILDGOOSE=h})(this);
(function(c){function e(a){h.call(this,a)}var d=c.document,a=c.WILDGOOSE||{};a.account=a.account||{};a.account.change=a.account.change||{};a.account.change.pw=a.account.change.pw||{};var h=a.account.super_type;e.prototype=new h;e.prototype.constructor=e;e.prototype._getPayload=function(){var a=escape(d.getElementById("userId").textContent),c=SHA256(SHA256(escape(this.selectedEl.oldPassword.value))+this.randNum),e=SHA256(escape(this.selectedEl.newPassword.value));return"email\x3d"+a+"\x26old_pw\x3d"+
c+"\x26new_pw\x3d"+e};a.account.change.pw=e;"undefined"!==typeof module&&module.exports?module.exports=a:c.WILDGOOSE=a})(this);
(function(c){function e(c){a.call(this,c)}var d=c.WILDGOOSE||{};d.account=d.account||{};d.account.join=d.account.join||{};var a=d.account.super_type;e.prototype=new a;e.prototype.constructor=e;e.prototype._getPayload=function(){var a=escape(this.selectedEl.email.value),b=SHA256(escape(this.selectedEl.password.value));return"email\x3d"+a+"\x26password\x3d"+b};d.account.join=e;"undefined"!==typeof module&&module.exports?module.exports=d:c.WILDGOOSE=d})(this);
(function(c){function e(c){a.call(this,c)}var d=c.WILDGOOSE||{};d.account=d.account||{};d.account.login=d.account.login||{};var a=d.account.super_type;e.prototype=new a;e.prototype.constructor=e;e.prototype._getPayload=function(){var a=escape(this.selectedEl.email.value),b=SHA256(SHA256(escape(this.selectedEl.password.value))+this.randNum);return"email\x3d"+a+"\x26password\x3d"+b};d.account.login=e;"undefined"!==typeof module&&module.exports?module.exports=d:c.WILDGOOSE=d})(this);
(function(c){function e(c){a.call(this,c)}var d=c.WILDGOOSE||{};d.account=d.account||{};d.account.logout=d.account.logout||{};var a=d.account.super_type;e.prototype=new a;e.prototype.constructor=e;d.account.logout=e;"undefined"!==typeof module&&module.exports?module.exports=d:c.WILDGOOSE=d})(this);
(function(c){function e(a){h.call(this,a)}var d=c.document,a=c.WILDGOOSE||{};a.account=a.account||{};a.account.withdraw=a.account.withdraw||{};var h=a.account.super_type;e.prototype=new h;e.prototype.constructor=e;e.prototype._getPayload=function(){var a=escape(d.getElementById("userId").textContent),c=SHA256(SHA256(escape(this.selectedEl.password.value))+this.randNum);return"email\x3d"+a+"\x26password\x3d"+c+"\x26check\x3dwithdraw"};a.account.withdraw=e;"undefined"!==typeof module&&module.exports?
module.exports=a:c.WILDGOOSE=a})(this);
(function(c){var e=c.document,d=c.WILDGOOSE||{};d.modal=d.modal||{};d.modal.join=d.modal.join||{};var a=CAGE.util.template,h=CAGE.ui.popup.super_type,b=d.account.join;d.modal.join={init:function(){this.joinBtn=e.querySelector("#join");this.template=a.get({url:"/api/v1/templates/join.html"});this.joinPopup=new h({element:this.joinBtn,template:this.template});this.joinPopup.afteropen.add(this._openPopup.bind(this))},_openPopup:function(a){this._accountInit();a.querySelector("#create").addEventListener("click",this._clickHandler.bind(this),
!1);e.querySelector(".form-container input[name\x3demail]").focus()},_closePopup:function(){this.joinPopup.afterclose.add(function(){location.reload()});this.joinPopup.close()},_accountInit:function(){this.joinAccount=new b({method:"POST",url:"/api/v1/accounts/",form:".form-container",rule:{email:{type:"email"},password:{type:"password"},confirm:{type:"confirm",target:"password"}}});this.joinPopup.afterclose.add(this.joinAccount.stop.bind(this.joinAccount))},_clickHandler:function(a){this.joinAccount.exec(this._closePopup.bind(this))}};
"undefined"!==typeof module&&module.exports?module.exports=d:c.WILDGOOSE=d})(this);
(function(c){var e=c.document,d=c.console,a=c.WILDGOOSE||{};a.modal=a.modal||{};a.modal.login=a.modal.login||{};var h=CAGE.ajax,b=CAGE.util.template,l=CAGE.ui.popup.super_type,f=a.account.login,k=a.user;a.modal.login={init:function(){this.loginBtn=e.querySelector("#login");this.template=b.get({url:"/api/v1/templates/login.html"});this.loginPopup=new l({element:this.loginBtn,template:this.template});this.loginPopup.afteropen.add(this._openPopup.bind(this))},_openPopup:function(a){this._accountInit();
a.querySelector("#create").addEventListener("click",this._clickHandler.bind(this),!1);e.querySelector(".form-container input[name\x3demail]").focus()},_closePopup:function(){this.loginPopup.afterclose.add(function(){location.reload()});this.loginPopup.close()},_accountInit:function(){var a=k.getRandomNumber();this.loginAccount=new f({method:"POST",url:"/api/v1/session/",form:".form-container",rule:{email:{type:"email",extend:{usable:[function(a,b){h.GET({isAsync:!1,url:"/api/v1/session?email\x3d"+
a.value,success:function(a){d.log("Success!");b(!0,!0)},failure:function(a){d.log("Failure!");b(!1,!0)},error:function(a){d.log("Error!")}})},"가입되지 않은 이메일입니다."]}},password:{type:"password"}},randNum:a});this.loginPopup.afterclose.add(this.loginAccount.stop.bind(this.loginAccount))},_clickHandler:function(a){this.loginAccount.exec(this._closePopup.bind(this),function(){e.getElementById("result-msg").innerText="비밀번호가 틀렸습니다."})}};"undefined"!==typeof module&&module.exports?module.exports=a:c.WILDGOOSE=
a})(this);
(function(c){var e=c.document,d=c.console,a=c.WILDGOOSE||{};a.modal=a.modal||{};a.modal.setting=a.modal.setting||{};var h=CAGE.ajax,b=CAGE.ui.popup.super_type,l=CAGE.util.template,f=a.account.withdraw,k=a.account.change.pw,g=a.user;a.modal.setting={init:function(){this.button={setting:e.querySelector("#setting"),withdraw:null,changePw:null};this.cache={settingHandler:this._settingHandler.bind(this),submitHandler:this._submitHandler.bind(this),openPopup:this._openPopup.bind(this),closePopup:this._closePopup.bind(this),withdraw:this._withdraw.bind(this),
changePw:this._changePw.bind(this)};this.template={setting:l.get({url:"/api/v1/templates/setting.html"}),withdraw:null,changePw:null};this.account={withdraw:null,changePw:null};this.settingPopup=new b({element:this.button.setting,template:this.template.setting});this.settingPopup.afteropen.add(this.cache.openPopup)},_openPopup:function(){this._addClickEvent();this._getTemplates()},_closePopup:function(){this._removeClickEvent();this.settingPopup.afterclose.add(function(){location.reload()});this.settingPopup.close()},
_settingHandler:function(a){a=a.target;d.log(a);this._selectUI(a.name)},_addClickEvent:function(){this.button.withdraw=e.querySelector("#withdraw");this.button.changePw=e.querySelector("#changePw");this.button.withdraw.addEventListener("click",this.cache.settingHandler,!1);this.button.changePw.addEventListener("click",this.cache.settingHandler,!1)},_removeClickEvent:function(){this.button.withdraw.removeEventListener("click",this.cache.settingHandler,!1);this.button.changePw.removeEventListener("click",
this.cache.settingHandler,!1)},_selectUI:function(a){var b=this.template[a],c=e.querySelector(".popup-content");null!==b&&(c.innerHTML=b,this._accountInit(a))},_accountInit:function(a){this.cache[a]();this.settingPopup.afterclose.add(this.account[a].stop.bind(this.account[a]));e.querySelector(".form-container button[name\x3dsubmit]").addEventListener("click",this.cache.submitHandler,!1);e.querySelector(".form-container input[name\x3d"+("changePw"==a?"oldP":"p")+"assword]").focus()},_submitHandler:function(a){this.account[a.target.form.name].exec(this.cache.closePopup)},
_withdraw:function(){this.account.withdraw=new f({method:"POST",url:"/api/v1/accounts/",form:".form-container",rule:{password:{type:"password"},confirm:{type:"confirm",target:"password"}},randNum:g.getRandomNumber()})},_changePw:function(){this.account.changePw=new k({method:"PUT",url:"/api/v1/accounts/",form:".form-container",rule:{oldPassword:{type:"password",extend:{exist:[function(a,b){h.POST({isAsync:!1,url:"/api/v1/session",success:function(a){d.log("Success!");b(!0,!0)},failure:function(a){d.log("Failure!");
b(!1,!0)},error:function(a){d.log("Error!")},data:function(){var b=g.getId(),c=SHA256(SHA256(escape(a.value))+g.getRandomNumber());return"email\x3d"+b+"\x26password\x3d"+c}()})},"비밀번호가 다릅니다."]}},newPassword:{type:"password"},newConfirm:{type:"confirm",target:"newPassword"}},randNum:g.getRandomNumber()})},_getTemplates:function(){if(null===this.template.withdraw){var a=l.get({url:"/api/v1/templates/withdraw.html"}),b=l.getCompiler(a);this.template.withdraw=b({email:g.getId()},a)}null===this.template.changePw&&
(a=l.get({url:"/api/v1/templates/changePassword.html"}),b=l.getCompiler(a),this.template.changePw=b({email:g.getId()},a))}};"undefined"!==typeof module&&module.exports?module.exports=a:c.WILDGOOSE=a})(this);
(function(){function c(a){this._more(a)}var e=window.WILDGOOSE||{};e.more=e.more||{};e.more.super_type=e.more.super_type||{};var d=CAGE.ajax,a=CAGE.event.emitter,h=CAGE.util.template;c.prototype={constructor:"More",_more:function(b){void 0!==b&&(this.presuccess=new a("presuccess"),this.postsuccess=new a("postsuccess"),this.moreBtnEl=b.more.button,this.container=b.container,this.requestNum=b.requestNum,this.template=b.template,this.templateCompiler=h.getCompiler(),this.metadata={curNum:b.more.curNum,
totalNum:b.more.totalNum,updatedNum:0,keyword:b.keyword},this.cache={exec:this._exec.bind(this),scrollingHandler:this._scrollingHandler.bind(this)},this.status={exec:!0},null!=this.moreBtnEl&&(this.moreBtnEl.addEventListener("click",this.cache.exec,!1),this.moreBtnEl.addEventListener("approachPageEnd",this.cache.exec,!1),this._updateUI()))},_exec:function(a){this.status.exec&&(this.status.exec=!1,d.GET({url:this.getURL(),success:this._successHandler.bind(this),failure:this.failure,error:this.error}))},
_addPageEndEvent:function(){window.addEventListener("scroll",this.cache.scrollingHandler,!1)},_removePageEndEvent:function(){window.removeEventListener("scroll",this.cache.scrollingHandler,!1)},_scrollingHandler:function(a){this.getApproachEventCondition()&&(a=new CustomEvent("approachPageEnd"),this.moreBtnEl.dispatchEvent(a))},_successHandler:function(a){a=this.success(a);void 0!==a&&0!=a.length&&(this.presuccess.dispatch(a),a=this._moldDataIntoTempate(a),this._attachRecievedData(a),this.postsuccess.dispatch(this.container),
this._updateMetaData(a.length),this._updateUI(),this.status.exec=!0)},getApproachEventCondition:function(){return!1},getURL:function(){return""},getMoldedData:function(a,c,d){return""},success:function(a){},failure:function(a){},error:function(a){},_updateMetaData:function(a){this.metadata.updatedNum=a;this.metadata.curNum+=a},_updateUI:function(){var a=this.metadata.totalNum,c=this.metadata.curNum;this._addPageEndEvent();if(0==a||a<=c)this._removePageEndEvent(),this.moreBtnEl.setAttribute("style",
"display: none;")},_moldDataIntoTempate:function(a){for(var c=a.length,d=[],e=0;e<c;e++){var h=this.getMoldedData(a[e],this.templateCompiler,this.template);d.push(h)}return d},_attachRecievedData:function(a){this.container.innerHTML+=a.join("")}};e.more.super_type=c;"undefined"!==typeof module&&module.exports?module.exports=e:window.WILDGOOSE=e})();
(function(){function c(a){h.call(this,a)}var e=window.document,d=window.console,a=window.WILDGOOSE||{};a.search=a.search||{};a.search.article=a.search.article||{};var h=a.more.super_type,b=a.user;c.prototype=new h;c.prototype.constuctor=c;c.prototype.getApproachEventCondition=function(a){var c=e.querySelector(".footer");a=window.innerHeight;var d=parseInt(window.getComputedStyle(c,null).height),c=c.getBoundingClientRect().bottom-d;return!0==b.isMobile()?a>c-100:a>c};c.prototype.getMoldedData=function(a,
b,c){var d=a.datetime;a.datetime=d.substring(0,d.length-11);return'\x3cli class\x3d"card card-reporter"\x3e'+b(a,c)+"\x3c/li\x3e"};c.prototype.getURL=function(){var a="/api/v1/me/"+b.getId()+"/timeline?start_item\x3d"+this.metadata.curNum+"\x26how_many\x3d"+this.requestNum;d.log(a);return a};c.prototype.success=function(a){return a.data.articles};a.more.article=c})();
(function(){function c(b){h.call(this,b);this.postsuccess.add(function(b){a.addCards(b)})}var e=window.document,d=window.WILDGOOSE||{};d.search=d.search||{};d.search.more=d.search.more||{};var a=d.ui.favorite,h=d.more.super_type;c.prototype=new h;c.prototype.constuctor=c;c.prototype.getApproachEventCondition=function(a){var c=e.querySelector(".footer");a=window.innerHeight;var d=parseInt(window.getComputedStyle(c,null).height),c=c.getBoundingClientRect().bottom-d;return a-15>c};c.prototype.getMoldedData=
function(a,c,d){return'\x3cli class\x3d"card card-reporter"\x3e'+c(a,d)+"\x3c/li\x3e"};c.prototype.getURL=function(){return"/api/v1/search?q\x3d"+this.metadata.keyword+"\x26start_item\x3d"+this.metadata.curNum+"\x26how_many\x3d"+this.requestNum};c.prototype.success=function(a){return a.data.reporters};d.more.search=c})();
(function(){var c=window.console,e=window.WILDGOOSE||{};e.search=e.search||{};e.search.auto_complement=e.search.auto_complement||{};var d=CAGE.ajax;e.search.auto_complement={init:function(a){this.row={requestCount:a.list.requestNum,currentCount:0};this.interval=a.list.interval;this.is={searching:!1,hovering:!1,pressedEnter:!1,listing:!1,highlighting:!1};this.box=a.searchBox;this.list=a.list.element;this.cache={searchedQuery:this.box.value,row:null,callbackRef:{notify:this.notify.bind(this),expired:this.expired.bind(this),
listHandler:this.listHandler.bind(this),drawList:this.drawList.bind(this),setHovering:this.setHovering.bind(this),observeState:this.observeState.bind(this)}};this.box.addEventListener("focus",this.cache.callbackRef.notify);this.box.addEventListener("blur",this.cache.callbackRef.expired)},expired:function(a){!1!=this.is.searching&&!1==this.is.hovering&&(!0==this.is.listing&&this.removeList(),clearInterval(this.is.searching),this.is.searching=!1)},notify:function(a){!1==this.is.searching&&(this.is.searching=
setInterval(this.cache.callbackRef.observeState,this.interval))},observeState:function(){var a=this.box.value;a!=this.cache.searchedQuery&&(c.log("detection: "+a),""==a?this.removeList():this.search(a))},search:function(a){this.cache.searchedQuery=a;d.GET({url:"/api/v1/search?autocomplete\x3dtrue\x26q\x3d"+a+"\x26how_many\x3d"+this.row.requestCount,callback:this.cache.callbackRef.drawList})},drawList:function(a){this.is.pressedEnter=!1;a=JSON.parse(a).data.reporters;c.log(a);if(void 0!==a&&0!=a.length){this.cache.row=
null;this.row.currentCount=a.length;for(var d="",b=0;b<this.row.currentCount;b++)d+="\x3cli\x3e\x3cdiv\x3e"+a[b].name+"\x3c/div\x3e\x3c/li\x3e";this.list.innerHTML=d;this.addList()}},removeList:function(){this.is.listing=!1;this.row.currentCount=0;this.cache.row=null;this.list.style.display="none";this.removeMouseRader(this.list);this.box.removeEventListener("keydown",this.cache.callbackRef.listHandler,!1);this.list.removeEventListener("click",this.cache.callbackRef.listHandler,!1);this.list.removeEventListener("mousemove",
this.cache.callbackRef.listHandler,!1);this.is.hovering=!1},addList:function(){this.is.listing=!0;this.list.style.display="inline-block";this.addMouseRader(this.list);this.box.addEventListener("keydown",this.cache.callbackRef.listHandler,!1);this.list.addEventListener("click",this.cache.callbackRef.listHandler,!1);this.list.addEventListener("mousemove",this.cache.callbackRef.listHandler,!1)},addMouseRader:function(a){a.addEventListener("mouseover",this.cache.callbackRef.setHovering,!1);a.addEventListener("mouseout",
this.cache.callbackRef.setHovering,!1)},removeMouseRader:function(a){a.removeEventListener("mouseover",this.cache.callbackRef.setHovering,!1);a.removeEventListener("mouseout",this.cache.callbackRef.setHovering,!1)},setHovering:function(a){"mouseover"==a.type?this.is.hovering=!0:"mouseout"==a.type&&(this.is.hovering=!1)},listHandler:function(a){var d=a.target;"keydown"==a.type&&d==this.box?(c.log("keydown"),d=a.keyCode,38==d||40==d?(a.preventDefault(),this.highlightRow(39-d)):13==d&&(a.preventDefault(),
this.selectEl(this.list.children[this.cache.row]))):"click"==a.type&&d.parentNode.parentNode==this.list&&!0==this.is.hovering?(this.is.hovering=!1,this.selectEl(a.target)):"mousemove"==a.type&&!0==this.is.highlighting&&this.highlightOut(this.cache.row)},selectEl:function(a){var c=null,c=void 0===a?this.box.value:a.innerText,c=this.removeNewline(c);this.box.value=c;this.cache.searchedQuery=c;this.removeList();this.box.form.submit()},removeNewline:function(a){var c=a.lastIndexOf("\n");return-1==c?a:
a.substring(0,c)},highlightRow:function(a){null==this.cache.row&&(a=this.cache.row=0);var c=this.cache.row;a=c-a;a>=this.row.currentCount?a=0:0>a&&(a=this.row.currentCount-1);this.highlightOut(c);this.highlightIn(a);this.cache.row=a},highlightIn:function(a){this.is.highlighting=!0;this.list.children[a].className="highlight"},highlightOut:function(a){null!==a&&(this.is.highlighting=!1,this.list.children[a].className="")}}})();
(function(){var c=window.WILDGOOSE||{};c.search=c.search||{};c.search.submit=c.search.submit||{};var e=CAGE.util.string;c.search.submit={init:function(c){this.box=c.box;this.form=this.box.form;this.submit=c.box;void 0!==this.form&&this.form.addEventListener("submit",this._handler.bind(this),!1)},_handler:function(c){""===e.trim(this.box.value)&&c.preventDefault()}}})();
(function(){var c=window.document,e=window.WILDGOOSE||{};e.search=e.search||{};var d=CAGE.util.template,a=e.more.search,h=e.search.auto_complement,b=e.search.submit;e.search={init:{init:function(e){var f=e.search;void 0!==f&&(this.form={box:c.querySelector(f.box),container:c.querySelector(f.container)},this.search={submit:c.querySelector(f.submit),requestNum:f.requestNum,templateURL:f.templateURL,template:d.get({url:f.templateURL})},b.init({box:this.form.box,submit:this.search.submit}));var f=e.autocompletion,
k=c.querySelector(e.autocompletion.list);void 0!==f&&null!==k&&h.init({searchBox:this.form.box,list:{element:k,requestNum:f.requestNum,interval:100}});k=e.more;f=c.querySelector(k.button);void 0!==k&&null!==f&&(k=c.querySelector(e.more.curNum),e=c.querySelector(e.more.totalNum),new a({more:{button:f,curNum:void 0!==k?parseInt(k.innerText):0,totalNum:void 0!==e?parseInt(e.innerText):0},container:this.form.container,template:this.search.template,keyword:this.form.box.value,requestNum:this.search.requestNum}));
this.form.box.focus()}}.init}})();